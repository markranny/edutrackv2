<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Grades &amp; Performance - Edu Track</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      background: #f8f2ef;
    }

    .sidebar {
      background: #2c3e50;
      width: 220px;
      color: #fff;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .profile-img img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 50%;
      cursor: pointer;
      transition: box-shadow 0.3s;
    }

    .profile-img img:hover {
      box-shadow: 0 0 15px 4px rgba(255, 255, 255, 0.6);
    }

    .profile-name {
      font-weight: bold;
      color: #ccc;
      margin-bottom: 20px;
    }

    #gradingSelect {
      width: 80%;
      padding: 10px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 14px;
      border: none;
      cursor: pointer;
      margin-bottom: auto;
      background: #fff;
      color: #000;
      transition: background 0.3s, transform 0.2s;
    }

    #gradingSelect:hover {
      background: #3498db;
      color: #1a1a1a;
      transform: translateY(-2px) scale(1.06);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    .main-content {
      flex-grow: 1;
      padding: 30px;
      overflow: auto;
      max-height: 100vh;
    }

    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .tabs {
      display: flex;
      gap: 20px;
    }

    .tab {
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      text-decoration: none;
      color: #000;
      background: #fff;
      transition: 0.3s;
    }

    .tab.active {
      background: #3498db;
      color: #fff;
    }

    .tab:hover {
      background: #3498db;
      color: #1a1a1a;
      transform: translateY(-2px) scale(1.06);
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      background: #3498db;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      font: 600 14px Arial;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .btn:hover {
      background: #2579b8;
      transform: scale(1.05);
    }

    .btn.export {
      background: #27ae60;
    }

    .btn.export:hover {
      background: #219a52;
    }

    .btn.template {
      background: #f39c12;
    }

    .btn.template:hover {
      background: #e67e22;
    }

    #subjectSelect {
      appearance: none;
      background: #3498db;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      font: 14px Arial, sans-serif;
      cursor: pointer;
      margin-right: 8px;
      transition: background 0.3s, transform 0.2s;
    }

    #subjectSelect:hover {
      background: #2579b8;
      transform: scale(1.05);
    }

    /* Student Selection Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border-radius: 10px;
      width: 80%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      right: 15px;
      top: 10px;
    }

    .close:hover {
      color: black;
    }

    .student-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .student-card {
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #f9f9f9;
    }

    .student-card:hover {
      border-color: #3498db;
      background: #e8f4f8;
      transform: translateY(-2px);
    }

    .student-card.selected {
      border-color: #27ae60;
      background: #e8f5e8;
    }

    .student-card h4 {
      margin: 0 0 5px 0;
      color: #2c3e50;
    }

    .student-card p {
      margin: 0;
      color: #666;
      font-size: 14px;
    }

    .search-box {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .select-student-btn {
      background: #27ae60;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 15px;
    }

    .select-student-btn:hover {
      background: #219a52;
    }

    .select-student-btn:disabled {
      background: #95a5a6;
      cursor: not-allowed;
    }

    .current-student-info {
      background: #e8f5e8;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border-left: 4px solid #27ae60;
    }

    .current-student-info h3 {
      margin: 0 0 5px 0;
      color: #27ae60;
    }

    .current-student-info p {
      margin: 0;
      color: #666;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
      font-size: 11px;
    }

    th, td {
      border: 1px solid #999;
      padding: 4px;
      text-align: center;
    }

    thead th {
      background: #f0f0f0;
    }

    .written-works-header {
      background: #ffc0cb;
    }

    .performance-tasks-header {
      background: #d9d2e9;
    }

    .quarterly-header {
      background: #f9cb9c;
    }

    .section-title {
      background: #b4c6e7;
      color: #000;
      font-weight: bold;
      text-align: left;
    }

    .gray-bg {
      background: #9df89d;
    }

    .calculated {
      background: #f2f2f2;
    }

    tbody tr:nth-child(even) {
      background: #f9f9f9;
    }

    td[contenteditable] {
      background: #fff;
    }

    .student-name-cell {
      text-align: left;
      padding: 8px;
      font-weight: bold;
      background: #e8f4f8;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 5px;
      color: white;
      font-weight: bold;
      z-index: 1001;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .notification.success {
      background-color: #27ae60;
    }

    .notification.error {
      background-color: #e74c3c;
    }

    .notification.show {
      opacity: 1;
    }

    .logout {
      margin-top: auto;
      padding-top: 30px;
    }

    .logout-btn {
      background-color: #3498db;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
    }

    .logout-btn i {
      font-size: 24px;
      color: #ffffff;
      transition: color 0.3s ease;
    }

    .logout-btn:hover i {
      color: #960f0f;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <div class="profile-img" id="profileIcon"><img src="assets/profile.jpg" alt="Profile"></div>
    <div class="profile-name">Teacher</div>

    <select id="gradingSelect">
      <option value="1st">ðŸ“˜ 1st Quarter</option>
      <option value="2nd">ðŸ“™ 2nd Quarter</option>
      <option value="3rd">ðŸ“— 3rd Quarter</option>
      <option value="4th">ðŸ“• 4th Quarter</option>
    </select>

    <div class="logout">
      <a href="logout2.html" class="logout-btn">
        <i class="fa-solid fa-right-from-bracket"></i>
      </a>
    </div>
  </div>

  <div class="main-content">
    <div class="toolbar">
      <div class="tabs">
        <a href="dash.html" class="tab">Attendance</a>
        <a href="grades_performance.html" class="tab active">Grades &amp; Performance</a>
      </div>

      <div class="action-buttons">
        <select id="subjectSelect" hidden></select>
        
        <button class="btn" onclick="openStudentSelector()">
          <i class="fas fa-user-plus"></i>
          Select Student
        </button>
        
        <button class="btn template" onclick="downloadTemplate()">
          <i class="fas fa-download"></i>
          Download Template
        </button>
        
        <button class="btn" onclick="document.getElementById('fileInput').click()">
          <i class="fas fa-upload"></i>
          Import Excel
        </button>
        
        <button class="btn export" onclick="exportToExcel()">
          <i class="fas fa-file-excel"></i>
          Export to Excel
        </button>
        
        <input type="file" id="fileInput" accept=".xlsx,.xls" style="display:none">
      </div>
    </div>

    <!-- Current Student Info -->
    <div id="currentStudentInfo" class="current-student-info" style="display: none;">
      <h3 id="currentStudentName">No student selected</h3>
      <p id="currentStudentEmail"></p>
    </div>

    <table>
      <thead>
        <tr>
          <th rowspan="2" class="written-works-header">STUDENT</th>
          <th colspan="7" class="written-works-header">WRITTEN WORKS (30%)</th>
          <th colspan="7" class="performance-tasks-header">PERFORMANCE TASKS (50%)</th>
          <th colspan="3" class="quarterly-header">QUARTERLY ASSESSMENT (20%)</th>
          <th rowspan="2" class="gray-bg">INITIAL<br>GRADE</th>
          <th rowspan="2" class="gray-bg">QUARTERLY<br>GRADE</th>
        </tr>
        <tr>
          <th>1</th><th>2</th><th>3</th><th>4</th><th>TOTAL</th><th>PS</th><th>WA</th>
          <th>1</th><th>2</th><th>3</th><th>4</th><th>TOTAL</th><th>PS</th><th>WA</th>
          <th>SCORE</th><th>PS</th><th>WA</th>
        </tr>
      </thead>
      <tbody id="student-data">
        <tr class="section-title">
          <td>NAME</td>
          <td>5</td><td>5</td><td>5</td><td>5</td><td>20</td><td>100</td><td>30</td>
          <td>5</td><td>5</td><td>5</td><td>5</td><td>20</td><td>100</td><td>50</td>
          <td>30</td><td>100</td><td>20</td>
          <td>100</td><td>100</td>
        </tr>
        <tr id="studentGradeRow" style="display: none;">
          <td class="student-name-cell" id="studentNameCell">Select a student</td>
          <!-- Written Works -->
          <td contenteditable="true" data-ww="1"></td>
          <td contenteditable="true" data-ww="2"></td>
          <td contenteditable="true" data-ww="3"></td>
          <td contenteditable="true" data-ww="4"></td>
          <td class="calculated ww-total">0.00</td>
          <td class="calculated ww-ps">0.00</td>
          <td class="calculated ww-wa">0.00</td>
          <!-- Performance Tasks -->
          <td contenteditable="true" data-pt="1"></td>
          <td contenteditable="true" data-pt="2"></td>
          <td contenteditable="true" data-pt="3"></td>
          <td contenteditable="true" data-pt="4"></td>
          <td class="calculated pt-total">0.00</td>
          <td class="calculated pt-ps">0.00</td>
          <td class="calculated pt-wa">0.00</td>
          <!-- Quarterly Assessment -->
          <td contenteditable="true" data-qa="score"></td>
          <td class="calculated qa-ps">0.00</td>
          <td class="calculated qa-wa">0.00</td>
          <td class="calculated initial-grade">0.00</td>
          <td class="calculated final-grade">0.00</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Student Selection Modal -->
  <div id="studentModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeStudentModal()">&times;</span>
      <h2><i class="fas fa-user-graduate"></i> Select Registered Student</h2>
      <input type="text" id="studentSearch" class="search-box" placeholder="Search by name or email...">
      <div id="studentList" class="student-list">
        <!-- Students will be populated here -->
      </div>
      <button id="selectStudentBtn" class="select-student-btn" onclick="selectStudent()" disabled>
        Select Student
      </button>
    </div>
  </div>

  <!-- Notification -->
  <div id="notification" class="notification"></div>

  <script>
    document.getElementById('profileIcon').onclick = () => location.href = 'profile.html';

    let selectedStudentData = null;
    let allRegisteredStudents = [];

    const getCurrentSubject = () => document.getElementById('subjectSelect').value || 'Unknown';
    const getCurrentQuarter = () => document.getElementById('gradingSelect').value;

    // Notification system
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type}`;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Load all registered students from backend
    async function loadRegisteredStudents() {
      try {
        // Get all registered users with role 'student'
        // Since we don't have a direct API to get all students, we'll get them from localStorage
        // In a real implementation, you'd have a backend endpoint for this
        const students = await getAllRegisteredStudents();
        allRegisteredStudents = students;
        return students;
      } catch (error) {
        console.error('Error loading registered students:', error);
        showNotification('Error loading registered students: ' + error, 'error');
        return [];
      }
    }

    // Mock function to get registered students - in real app, this would be a backend call
    async function getAllRegisteredStudents() {
      // For now, we'll create a mock list based on typical student data
      // In a real implementation, you'd call: await window.__TAURI__.core.invoke("get_all_students")
      return [
        {
          id: 1,
          email: 'john.doe@student.edu',
          firstname: 'John',
          lastname: 'Doe',
          role: 'student'
        },
        {
          id: 2,
          email: 'jane.smith@student.edu',
          firstname: 'Jane',
          lastname: 'Smith',
          role: 'student'
        },
        {
          id: 3,
          email: 'alice.johnson@student.edu',
          firstname: 'Alice',
          lastname: 'Johnson',
          role: 'student'
        },
        {
          id: 4,
          email: 'bob.wilson@student.edu',
          firstname: 'Bob',
          lastname: 'Wilson',
          role: 'student'
        },
        {
          id: 5,
          email: 'maria.garcia@student.edu',
          firstname: 'Maria',
          lastname: 'Garcia',
          role: 'student'
        }
      ];
    }

    function openStudentSelector() {
      loadRegisteredStudents().then(() => {
        populateStudentList(allRegisteredStudents);
        document.getElementById('studentModal').style.display = 'flex';
      });
    }

    function closeStudentModal() {
      document.getElementById('studentModal').style.display = 'none';
      selectedStudentData = null;
      document.getElementById('selectStudentBtn').disabled = true;
    }

    function populateStudentList(students) {
      const studentList = document.getElementById('studentList');
      studentList.innerHTML = '';

      if (students.length === 0) {
        studentList.innerHTML = '<p style="text-align: center; color: #666; grid-column: 1 / -1;">No registered students found.</p>';
        return;
      }

      students.forEach(student => {
        const studentCard = document.createElement('div');
        studentCard.className = 'student-card';
        studentCard.onclick = () => selectStudentCard(studentCard, student);
        
        studentCard.innerHTML = `
          <h4>${student.firstname} ${student.lastname}</h4>
          <p><i class="fas fa-envelope"></i> ${student.email}</p>
          <p><i class="fas fa-id-badge"></i> ID: ${student.id}</p>
        `;
        
        studentList.appendChild(studentCard);
      });
    }

    function selectStudentCard(cardElement, student) {
      // Remove selection from all cards
      document.querySelectorAll('.student-card').forEach(card => {
        card.classList.remove('selected');
      });
      
      // Select current card
      cardElement.classList.add('selected');
      selectedStudentData = student;
      document.getElementById('selectStudentBtn').disabled = false;
    }

    function selectStudent() {
      if (!selectedStudentData) return;

      // Update current student info
      document.getElementById('currentStudentName').textContent = 
        `${selectedStudentData.firstname} ${selectedStudentData.lastname}`;
      document.getElementById('currentStudentEmail').textContent = selectedStudentData.email;
      document.getElementById('currentStudentInfo').style.display = 'block';

      // Update the grade table
      document.getElementById('studentNameCell').textContent = 
        `${selectedStudentData.firstname} ${selectedStudentData.lastname}`;
      document.getElementById('studentGradeRow').style.display = 'table-row';

      // Load existing grades for this student
      loadStudentGrades(selectedStudentData);

      closeStudentModal();
      showNotification(`Selected student: ${selectedStudentData.firstname} ${selectedStudentData.lastname}`, 'success');
    }

    function loadStudentGrades(student) {
      const subject = getCurrentSubject();
      const quarter = getCurrentQuarter();
      const key = `grades-${student.email}-${subject}-${quarter}`;
      
      const existingGrades = JSON.parse(localStorage.getItem(key) || '{}');
      
      // Load written works
      for (let i = 1; i <= 4; i++) {
        const cell = document.querySelector(`[data-ww="${i}"]`);
        if (cell && existingGrades.writtenWorks && existingGrades.writtenWorks[i-1] !== undefined) {
          cell.textContent = existingGrades.writtenWorks[i-1];
        } else if (cell) {
          cell.textContent = '';
        }
      }
      
      // Load performance tasks
      for (let i = 1; i <= 4; i++) {
        const cell = document.querySelector(`[data-pt="${i}"]`);
        if (cell && existingGrades.performanceTasks && existingGrades.performanceTasks[i-1] !== undefined) {
          cell.textContent = existingGrades.performanceTasks[i-1];
        } else if (cell) {
          cell.textContent = '';
        }
      }
      
      // Load quarterly assessment
      const qaCell = document.querySelector('[data-qa="score"]');
      if (qaCell && existingGrades.quarterlyAssessment !== undefined) {
        qaCell.textContent = existingGrades.quarterlyAssessment;
      } else if (qaCell) {
        qaCell.textContent = '';
      }
      
      // Recalculate
      recalculateGrades();
    }

    function saveStudentGrades() {
      if (!selectedStudentData) return;

      const subject = getCurrentSubject();
      const quarter = getCurrentQuarter();
      const key = `grades-${selectedStudentData.email}-${subject}-${quarter}`;
      
      const writtenWorks = [];
      for (let i = 1; i <= 4; i++) {
        const cell = document.querySelector(`[data-ww="${i}"]`);
        writtenWorks.push(parseFloat(cell.textContent) || 0);
      }
      
      const performanceTasks = [];
      for (let i = 1; i <= 4; i++) {
        const cell = document.querySelector(`[data-pt="${i}"]`);
        performanceTasks.push(parseFloat(cell.textContent) || 0);
      }
      
      const qaCell = document.querySelector('[data-qa="score"]');
      const quarterlyAssessment = parseFloat(qaCell.textContent) || 0;
      
      const finalGrade = parseFloat(document.querySelector('.final-grade').textContent) || 0;
      
      const gradeData = {
        studentId: selectedStudentData.id,
        studentEmail: selectedStudentData.email,
        studentName: `${selectedStudentData.firstname} ${selectedStudentData.lastname}`,
        subject,
        quarter,
        writtenWorks,
        performanceTasks,
        quarterlyAssessment,
        finalGrade,
        lastUpdated: new Date().toISOString()
      };
      
      localStorage.setItem(key, JSON.stringify(gradeData));
      
      // Also save to student's individual record for analytics
      const studentGradesKey = `student_grades_${selectedStudentData.email}`;
      let studentGrades = JSON.parse(localStorage.getItem(studentGradesKey) || '{}');
      
      if (!studentGrades[subject]) {
        studentGrades[subject] = {};
      }
      
      studentGrades[subject][quarter] = finalGrade;
      localStorage.setItem(studentGradesKey, JSON.stringify(studentGrades));
    }

    function recalculateGrades() {
      if (!selectedStudentData) return;

      const row = document.getElementById('studentGradeRow');
      
      // Calculate Written Works
      const wwCells = row.querySelectorAll('[data-ww]');
      let wwTotal = 0;
      wwCells.forEach(cell => {
        wwTotal += parseFloat(cell.textContent) || 0;
      });
      
      row.querySelector('.ww-total').textContent = wwTotal.toFixed(2);
      row.querySelector('.ww-ps').textContent = (wwTotal * 5).toFixed(2);
      row.querySelector('.ww-wa').textContent = (wwTotal * 1.5).toFixed(2);

      // Calculate Performance Tasks
      const ptCells = row.querySelectorAll('[data-pt]');
      let ptTotal = 0;
      ptCells.forEach(cell => {
        ptTotal += parseFloat(cell.textContent) || 0;
      });
      
      row.querySelector('.pt-total').textContent = ptTotal.toFixed(2);
      row.querySelector('.pt-ps').textContent = (ptTotal * 5).toFixed(2);
      row.querySelector('.pt-wa').textContent = (ptTotal * 2.5).toFixed(2);

      // Calculate Quarterly Assessment
      const qa = parseFloat(row.querySelector('[data-qa="score"]').textContent || 0);
      const QA_PS_FACTOR = 100 / 30;
      const QA_WA_FACTOR = 20 / 30;

      row.querySelector('.qa-ps').textContent = (qa * QA_PS_FACTOR).toFixed(2);
      row.querySelector('.qa-wa').textContent = (qa * QA_WA_FACTOR).toFixed(2);

      // Calculate Final Grade
      const initialGrade = (wwTotal * 1.5) + (ptTotal * 2.5) + (qa * QA_WA_FACTOR);
      row.querySelector('.initial-grade').textContent = initialGrade.toFixed(2);
      row.querySelector('.final-grade').textContent = initialGrade >= 0 ? initialGrade.toFixed(2) : '0.00';
      
      // Save grades automatically
      saveStudentGrades();
    }

    // Search functionality
    document.getElementById('studentSearch').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const filteredStudents = allRegisteredStudents.filter(student => {
        const fullName = `${student.firstname} ${student.lastname}`.toLowerCase();
        const email = student.email.toLowerCase();
        return fullName.includes(searchTerm) || email.includes(searchTerm);
      });
      populateStudentList(filteredStudents);
    });

    // Add event listeners for grade inputs
    document.addEventListener('input', function(e) {
      if (e.target.hasAttribute('contenteditable') && selectedStudentData) {
        recalculateGrades();
      }
    });

    // Initialize subjects dropdown
    function initSubjectDropdown() {
      const select = document.getElementById('subjectSelect');
      const scheduleRaw = localStorage.getItem('schedule');
      if (!scheduleRaw) return;

      const subjects = [...new Set(JSON.parse(scheduleRaw)
                          .map(s => s.subject)
                          .filter(Boolean))].sort((a, b) => a.localeCompare(b));

      if (!subjects.length) return;

      select.innerHTML = '';
      subjects.forEach((sub, i) => {
        const o = document.createElement('option');
        o.value = sub;
        o.textContent = `ðŸ“š ${sub}`;
        select.appendChild(o);
        if (i === 0) select.value = sub;
      });

      select.hidden = false;
      select.onchange = () => {
        if (selectedStudentData) {
          loadStudentGrades(selectedStudentData);
        }
      };
    }

    // Export and template functions (simplified)
    function exportToExcel() {
      if (!selectedStudentData) {
        showNotification('Please select a student first', 'error');
        return;
      }
      
      const subject = getCurrentSubject();
      const quarter = getCurrentQuarter();
      const filename = `${selectedStudentData.firstname}_${selectedStudentData.lastname}_${subject}_${quarter}_Grades.xlsx`;
      
      const table = document.querySelector('table');
      const wb = XLSX.utils.table_to_book(table, {sheet: "Grades"});
      XLSX.writeFile(wb, filename);
      
      showNotification(`Grades exported for ${selectedStudentData.firstname} ${selectedStudentData.lastname}`, 'success');
    }

    function downloadTemplate() {
      showNotification('Template download feature coming soon!', 'success');
    }

    // Initialize everything
    document.addEventListener('DOMContentLoaded', function() {
      initSubjectDropdown();
      document.getElementById('gradingSelect').onchange = () => {
        if (selectedStudentData) {
          loadStudentGrades(selectedStudentData);
        }
      };
    });
  </script>
</body>
</html>